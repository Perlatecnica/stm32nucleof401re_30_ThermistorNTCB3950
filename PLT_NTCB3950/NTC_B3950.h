/* Copyright (c) 2022 Perlatecnica
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


#ifndef PLT_NTC_B9350_H
#define PLT_NTC_B9350_H

#include "mbed.h"

// Number of ADC samples for average
#define NUMSAMPLES 10

#define LOOK_UP_TABLE_ELEMENTS 181

class NTC_B3950
{
public:
	NTC_B3950(PinName pADCpin, uint16_t pSerialResistance);
	float getTemperature(void);

private:
	AnalogIn adcpin;
	uint16_t serialResistance;

	float lookUpTable[LOOK_UP_TABLE_ELEMENTS]{
		11093800, //  -55
		10156100, //  -54
		9311690, //   -53
		8549810, //   -52
		7861200, //   -51
		7237730, //   -50
		6672310, //   -49
		6158700, //   -48
		5691440, //   -47
		5265690, //   -46
		4877200, //   -45
		4522230, //   -44
		4197420, //   -43
		3899830, //   -42
		3626830, //   -41
		3376080, //   -40
		3145490, //   -39
		2933200, //   -38
		2737530, //   -37
		2556980, //   -36
		2390220, //   -35
		2236030, //   -34
		2093330, //   -33
		1961130, //   -32
		1838540, //   -31
		1724780, //   -30
		1619100, //   -29
		1520850, //   -28
		1429440, //   -27
		1344320, //   -26
		1265000, //   -25
		1191020, //   -24
		1121980, //   -23
		1057500, //   -22
		997241, //    -21
		940885, //    -20
		888148, //    -19
		838764, //    -18
		792494, //    -17
		749115, //    -16
		708422, //    -15
		670228, //    -14
		634359, //    -13
		600657, //    -12
		568973, //    -11
		539171, //    -10
		511127, //    -9
		484723, //    -8
		459851, //    -7
		436413, //    -6
		414316, //    -5
		393473, //    -4
		373806, //    -3
		355239, //    -2
		337705, //    -1
		321140, //    0
		305482, //    1
		290679, //    2
		276676, //    3
		263427, //    4
		250886, //    5
		239012, //    6
		227764, //    7
		217106, //    8
		207005, //    9
		198530, //    10
		188343, //    11
		179724, //    12
		171545, //    13
		163780, //    14
		156407, //    15
		149403, //    16
		142748, //    17
		136423, //    18
		130410, //    19
		124692, //    20
		119253, //    21
		114078, //    22
		109152, //    23
		104464, //    24
		100000, //    25
		95747, //     26
		91697, //     27
		87837, //     28
		84157, //     29
		80650, //     30
		77305, //     31
		74115, //     32
		71072, //     33
		68167, //     34
		65395, //     35
		62749, //     36
		60222, //     37
		57809, //     38
		55503, //     39
		53300, //     40
		51195, //     41
		49183, //     42
		47259, //     43
		45419, //     44
		43659, //     45
		41975, //     46
		40364, //     47
		38822, //     48
		37346, //     49
		35840, //     50
		34580, //     51
		33284, //     52
		32043, //     53
		30853, //     54
		29713, //     55
		28620, //     56
		27573, //     57
		26568, //     58
		25605, //     59
		24681, //     60
		23794, //     61
		22944, //     62
		22127, //     63
		21344, //     64
		20592, //     65
		19869, //     66
		19175, //     67
		18509, //     68
		17869, //     69
		17253, //     70
		16662, //     71
		16094,  //    72
		15548, //     73
		15022, //     74
		14517, //     75
		14031, //     76
		13564, //     77
		13114, //     78
		12681, //     79
		12265, //     80
		11864, //     81
		11478, //     82
		11106, //     83
		10748, //     84
		10404, //     85
		10071, //     86
		9751, //      87
		9443, //      88
		9146, //      89
		8859, //      90
		8583, //      91
		8316, //      92
		8060, //      93
		7812, //      94
		7573, //      95
		7342, //      96
		7120, //      97
		6905, //      98
		6698, //      99
		6498, //      100
		6304, //      101
		6118, //      102
		5937, //      103
		5763, //      104
		5595, //      105
		5433, //      106
		5276, //      107
		5124, //      108
		4977, //      109
		4836, //      110
		4698, //      111
		4566, //      112
		4438, //      113
		4314, //      114
		4194, //      115
		4077, //      116
		3965, //      117
		3856, //      118
		3751, //      119
		3649, //      120
		3551, //      121
		3455, //      122
		3363, //      123
		3273, //      124
		3186 //       125
	};

};



#endif
